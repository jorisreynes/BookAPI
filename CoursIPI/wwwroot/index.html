<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liste de livres</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <script>
        // Vérifier l'état de connexion (par exemple, en vérifiant la présence d'un token JWT dans les cookies ou en utilisant un autre mécanisme)
        const token = localStorage.getItem('accessToken');
        
        if (token) {
            // Utilisateur connecté, rediriger vers index.html
            //if (token!='') { alert(token); }
            window.location.href = "index.html";
        } else {
            // Utilisateur non connecté, rediriger vers login.html
            window.location.href = "login.html";
        }
    </script>



        <h1>Votre liste de livres</h1>

        <div id="editForm">
            <h3>Éditer</h3>
            <form action="javascript:void(0);" onsubmit="updateItem()">
                <input type="hidden" id="edit-id">
                <input type="text" id="edit-name">
                <input type="text" id="edit-author">
                <input type="text" id="edit-edition">
                <input type="text" id="edit-description">
                <input type="text" id="edit-ean">
                <input type="submit" value="Enregistrer">
                <a onclick="closeInput()" aria-label="Fermer">&#10006;</a>
            </form>
        </div>

        <p id="counter"></p>

        <div id="books"></div>

        <button id="showFormButton">Ajouter un livre</button>

        <div id="addForm">
            <h3>Ajouter un livre</h3>
            <form action="javascript:void(0);" method="POST" onsubmit="addItem()">
                <input type="text" id="add-name" placeholder="Nom">
                <input type="text" id="add-author" placeholder="Auteur">
                <input type="text" id="add-edition" placeholder="Édition">
                <input type="text" id="add-description" placeholder="Description">
                <input type="text" id="add-ean" placeholder="EAN">
                <input type="submit" value="Ajouter">
            </form>
        </div>

        <script src="js/site.js" asp-append-version="true"></script>
    <script type="text/javascript">
                getItems();
    </script>
</body>
</html>